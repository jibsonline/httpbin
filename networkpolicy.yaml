apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: httpbin-allow-namespace
  labels:
    app: httpbin
spec:
  # This policy applies to all pods with the label 'app: httpbin'.
  podSelector:
    matchLabels:
      app: httpbin
  # This policy only affects incoming (Ingress) traffic.
  policyTypes:
    - Ingress
  ingress:
    # This rule allows traffic from any pod within the same namespace as the
    # httpbin pods. It acts as a secure default, preventing pods from
    # other namespaces from directly accessing the service.
    - from:
        - podSelector: {}
